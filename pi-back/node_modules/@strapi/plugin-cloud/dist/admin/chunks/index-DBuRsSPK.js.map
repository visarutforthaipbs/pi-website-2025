{"version":3,"file":"index-DBuRsSPK.js","sources":["../../../admin/src/pluginId.ts","../../../admin/src/components/Initializer.tsx","../../../admin/src/utils/prefixPluginTranslations.ts","../../../admin/src/index.ts"],"sourcesContent":["export const pluginId = 'cloud';\n","/**\n *\n * Initializer\n *\n */\n\nimport { useEffect, useRef } from 'react';\n\nimport { pluginId } from '../pluginId';\n\ntype InitializerProps = {\n  setPlugin: (id: string) => void;\n};\n\nconst Initializer = ({ setPlugin }: InitializerProps) => {\n  const ref = useRef(setPlugin);\n\n  useEffect(() => {\n    ref.current(pluginId);\n  }, []);\n\n  return null;\n};\n\nexport { Initializer };\n","type TradOptions = Record<string, string>;\n\nconst prefixPluginTranslations = (trad: TradOptions, pluginId: string): TradOptions => {\n  if (!pluginId) {\n    throw new TypeError(\"pluginId can't be empty\");\n  }\n  return Object.keys(trad).reduce((acc, current) => {\n    acc[`${pluginId}.${current}`] = trad[current];\n    return acc;\n  }, {} as TradOptions);\n};\n\nexport { prefixPluginTranslations };\n","/* eslint-disable check-file/filename-naming-convention */\n\nimport { Cloud } from '@strapi/icons';\n\nimport { Initializer } from './components/Initializer';\nimport { pluginId } from './pluginId';\nimport { prefixPluginTranslations } from './utils/prefixPluginTranslations';\n\nconst name = 'Deploy';\n\n// eslint-disable-next-line import/no-default-export\nexport default {\n  register(app: any) {\n    const { backendURL } = window.strapi;\n\n    // Only add the plugin menu link and registering it if the project is on development (localhost).\n    if (backendURL?.includes('localhost')) {\n      app.addMenuLink({\n        to: `plugins/${pluginId}`,\n        icon: Cloud,\n        intlLabel: {\n          id: `${pluginId}.plugin.name`,\n          defaultMessage: name,\n        },\n        Component: async () => {\n          const { App } = await import('./pages/App');\n\n          return App;\n        },\n      });\n      const plugin = {\n        id: pluginId,\n        initializer: Initializer,\n        isReady: false,\n        name,\n      };\n\n      app.registerPlugin(plugin);\n    }\n  },\n\n  async registerTrads(app: any) {\n    const { locales } = app;\n\n    const importedTrads = await Promise.all(\n      (locales as any[]).map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, pluginId),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n"],"names":["pluginId","Initializer","setPlugin","ref","useRef","useEffect","current","prefixPluginTranslations","trad","Object","keys","reduce","acc","name","register","app","backendURL","window","strapi","includes","addMenuLink","to","icon","Cloud","intlLabel","id","defaultMessage","Component","App","plugin","initializer","isReady","registerPlugin","registerTrads","locales","importedTrads","Promise","all","map","locale","then","default","data","catch","resolve"],"mappings":";;;;;AAAO,MAAMA,WAAW;;ACcxB,MAAMC,WAAc,GAAA,CAAC,EAAEC,SAAS,EAAoB,GAAA;AAClD,IAAA,MAAMC,MAAMC,YAAOF,CAAAA,SAAAA,CAAAA;IAEnBG,eAAU,CAAA,IAAA;AACRF,QAAAA,GAAAA,CAAIG,OAAO,CAACN,QAAAA,CAAAA;AACd,KAAA,EAAG,EAAE,CAAA;IAEL,OAAO,IAAA;AACT,CAAA;;ACpBA,MAAMO,wBAAAA,GAA2B,CAACC,IAAmBR,EAAAA,QAAAA,GAAAA;AAInD,IAAA,OAAOS,OAAOC,IAAI,CAACF,MAAMG,MAAM,CAAC,CAACC,GAAKN,EAAAA,OAAAA,GAAAA;AACpCM,QAAAA,GAAG,CAAC,CAAC,EAAEZ,QAAAA,CAAS,CAAC,EAAEM,OAAQ,CAAA,CAAC,CAAC,GAAGE,IAAI,CAACF,OAAQ,CAAA;QAC7C,OAAOM,GAAAA;AACT,KAAA,EAAG,EAAC,CAAA;AACN,CAAA;;;;;;;;;;;;;ACFA,MAAMC,IAAO,GAAA,QAAA;AAEb;AACA,YAAe;AACbC,IAAAA,QAAAA,CAAAA,CAASC,GAAQ,EAAA;AACf,QAAA,MAAM,EAAEC,UAAU,EAAE,GAAGC,OAAOC,MAAM;;QAGpC,IAAIF,UAAAA,EAAYG,SAAS,WAAc,CAAA,EAAA;AACrCJ,YAAAA,GAAAA,CAAIK,WAAW,CAAC;AACdC,gBAAAA,EAAAA,EAAI,CAAC,QAAQ,EAAErB,QAAAA,CAAS,CAAC;gBACzBsB,IAAMC,EAAAA,WAAAA;gBACNC,SAAW,EAAA;AACTC,oBAAAA,EAAAA,EAAI,CAAC,EAAEzB,QAAS,CAAA,YAAY,CAAC;oBAC7B0B,cAAgBb,EAAAA;AAClB,iBAAA;gBACAc,SAAW,EAAA,UAAA;AACT,oBAAA,MAAM,EAAEC,GAAG,EAAE,GAAG,MAAM,oDAAO,mBAAA,KAAA;oBAE7B,OAAOA,GAAAA;AACT;AACF,aAAA,CAAA;AACA,YAAA,MAAMC,MAAS,GAAA;gBACbJ,EAAIzB,EAAAA,QAAAA;gBACJ8B,WAAa7B,EAAAA,WAAAA;gBACb8B,OAAS,EAAA,KAAA;AACTlB,gBAAAA;AACF,aAAA;AAEAE,YAAAA,GAAAA,CAAIiB,cAAc,CAACH,MAAAA,CAAAA;AACrB;AACF,KAAA;AAEA,IAAA,MAAMI,eAAclB,GAAQ,EAAA;QAC1B,MAAM,EAAEmB,OAAO,EAAE,GAAGnB,GAAAA;QAEpB,MAAMoB,aAAAA,GAAgB,MAAMC,OAAQC,CAAAA,GAAG,CACrC,OAACH,CAAkBI,GAAG,CAAC,CAACC,MAAAA,GAAAA;AACtB,YAAA,OAAO,iCAAM,CAAC,CAAC,eAAe,EAAEA,MAAO,CAAA,KAAK,CAAC,CAAA,CAC1CC,IAAI,CAAC,CAAC,EAAEC,OAAAA,EAASC,IAAI,EAAE,GAAA;gBACtB,OAAO;AACLA,oBAAAA,IAAAA,EAAMnC,yBAAyBmC,IAAM1C,EAAAA,QAAAA,CAAAA;AACrCuC,oBAAAA;AACF,iBAAA;AACF,aAAA,CAAA,CACCI,KAAK,CAAC,IAAA;gBACL,OAAO;AACLD,oBAAAA,IAAAA,EAAM,EAAC;AACPH,oBAAAA;AACF,iBAAA;AACF,aAAA,CAAA;AACJ,SAAA,CAAA,CAAA;QAGF,OAAOH,OAAAA,CAAQQ,OAAO,CAACT,aAAAA,CAAAA;AACzB;AACF,CAAE;;;;;"}