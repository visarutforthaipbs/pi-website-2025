{"version":3,"file":"index-B-Z_z_qb.mjs","sources":["../../../admin/src/constants.js","../../../admin/src/pluginId.js","../../../admin/src/utils/getTrad.js","../../../admin/src/utils/prefixPluginTranslations.js","../../../admin/src/index.js"],"sourcesContent":["export const PERMISSIONS = {\n  // Roles\n  accessRoles: [\n    { action: 'plugin::users-permissions.roles.create', subject: null },\n    { action: 'plugin::users-permissions.roles.read', subject: null },\n  ],\n  createRole: [{ action: 'plugin::users-permissions.roles.create', subject: null }],\n  deleteRole: [{ action: 'plugin::users-permissions.roles.delete', subject: null }],\n  readRoles: [{ action: 'plugin::users-permissions.roles.read', subject: null }],\n  updateRole: [{ action: 'plugin::users-permissions.roles.update', subject: null }],\n\n  // AdvancedSettings\n  readAdvancedSettings: [\n    { action: 'plugin::users-permissions.advanced-settings.read', subject: null },\n  ],\n  updateAdvancedSettings: [\n    { action: 'plugin::users-permissions.advanced-settings.update', subject: null },\n  ],\n\n  // Emails\n  readEmailTemplates: [{ action: 'plugin::users-permissions.email-templates.read', subject: null }],\n  updateEmailTemplates: [\n    { action: 'plugin::users-permissions.email-templates.update', subject: null },\n  ],\n\n  // Providers\n  readProviders: [{ action: 'plugin::users-permissions.providers.read', subject: null }],\n  updateProviders: [{ action: 'plugin::users-permissions.providers.update', subject: null }],\n};\n","import { name } from '../../package.json';\n\nconst pluginId = name.replace(/^@strapi\\/plugin-/i, '');\n\nexport default pluginId;\n","import pluginId from '../pluginId';\n\nconst getTrad = (id) => `${pluginId}.${id}`;\n\nexport default getTrad;\n","const prefixPluginTranslations = (trad, pluginId) => {\n  if (!pluginId) {\n    throw new TypeError(\"pluginId can't be empty\");\n  }\n\n  return Object.keys(trad).reduce((acc, current) => {\n    acc[`${pluginId}.${current}`] = trad[current];\n\n    return acc;\n  }, {});\n};\n\nexport { prefixPluginTranslations };\n","import { strapi as pkgStrapi } from '../../package.json';\n\nimport { PERMISSIONS } from './constants';\nimport getTrad from './utils/getTrad';\nimport { prefixPluginTranslations } from './utils/prefixPluginTranslations';\n\nconst name = pkgStrapi.name;\n\nexport default {\n  register(app) {\n    // Create the plugin's settings section\n    app.createSettingSection(\n      {\n        id: 'users-permissions',\n        intlLabel: {\n          id: getTrad('Settings.section-label'),\n          defaultMessage: 'Users & Permissions plugin',\n        },\n      },\n      [\n        {\n          intlLabel: {\n            id: 'global.roles',\n            defaultMessage: 'Roles',\n          },\n          id: 'roles',\n          to: `users-permissions/roles`,\n          Component: () => import('./pages/Roles'),\n          permissions: PERMISSIONS.accessRoles,\n        },\n        {\n          intlLabel: {\n            id: getTrad('HeaderNav.link.providers'),\n            defaultMessage: 'Providers',\n          },\n          id: 'providers',\n          to: `users-permissions/providers`,\n          Component: () => import('./pages/Providers'),\n          permissions: PERMISSIONS.readProviders,\n        },\n        {\n          intlLabel: {\n            id: getTrad('HeaderNav.link.emailTemplates'),\n            defaultMessage: 'Email templates',\n          },\n          id: 'email-templates',\n          to: `users-permissions/email-templates`,\n          Component: () =>\n            import('./pages/EmailTemplates').then((mod) => ({\n              default: mod.ProtectedEmailTemplatesPage,\n            })),\n          permissions: PERMISSIONS.readEmailTemplates,\n        },\n        {\n          intlLabel: {\n            id: getTrad('HeaderNav.link.advancedSettings'),\n            defaultMessage: 'Advanced Settings',\n          },\n          id: 'advanced-settings',\n          to: `users-permissions/advanced-settings`,\n          Component: () =>\n            import('./pages/AdvancedSettings').then((mod) => ({\n              default: mod.ProtectedAdvancedSettingsPage,\n            })),\n          permissions: PERMISSIONS.readAdvancedSettings,\n        },\n      ]\n    );\n\n    app.registerPlugin({\n      id: 'users-permissions',\n      name,\n    });\n  },\n  bootstrap() {},\n  async registerTrads({ locales }) {\n    const importedTrads = await Promise.all(\n      locales.map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, 'users-permissions'),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n"],"names":["PERMISSIONS","accessRoles","action","subject","createRole","deleteRole","readRoles","updateRole","readAdvancedSettings","updateAdvancedSettings","readEmailTemplates","updateEmailTemplates","readProviders","updateProviders","pluginId","name","replace","getTrad","id","prefixPluginTranslations","trad","Object","keys","reduce","acc","current","pkgStrapi","register","app","createSettingSection","intlLabel","defaultMessage","to","Component","permissions","then","mod","default","ProtectedEmailTemplatesPage","ProtectedAdvancedSettingsPage","registerPlugin","bootstrap","registerTrads","locales","importedTrads","Promise","all","map","locale","data","catch","resolve"],"mappings":";;;;;;;;;MAAaA,WAAc,GAAA;;IAEzBC,WAAa,EAAA;AACX,QAAA;YAAEC,MAAQ,EAAA,wCAAA;YAA0CC,OAAS,EAAA;AAAK,SAAA;AAClE,QAAA;YAAED,MAAQ,EAAA,sCAAA;YAAwCC,OAAS,EAAA;AAAK;AACjE,KAAA;IACDC,UAAY,EAAA;AAAC,QAAA;YAAEF,MAAQ,EAAA,wCAAA;YAA0CC,OAAS,EAAA;AAAK;AAAE,KAAA;IACjFE,UAAY,EAAA;AAAC,QAAA;YAAEH,MAAQ,EAAA,wCAAA;YAA0CC,OAAS,EAAA;AAAK;AAAE,KAAA;IACjFG,SAAW,EAAA;AAAC,QAAA;YAAEJ,MAAQ,EAAA,sCAAA;YAAwCC,OAAS,EAAA;AAAK;AAAE,KAAA;IAC9EI,UAAY,EAAA;AAAC,QAAA;YAAEL,MAAQ,EAAA,wCAAA;YAA0CC,OAAS,EAAA;AAAK;AAAE,KAAA;;IAGjFK,oBAAsB,EAAA;AACpB,QAAA;YAAEN,MAAQ,EAAA,kDAAA;YAAoDC,OAAS,EAAA;AAAK;AAC7E,KAAA;IACDM,sBAAwB,EAAA;AACtB,QAAA;YAAEP,MAAQ,EAAA,oDAAA;YAAsDC,OAAS,EAAA;AAAK;AAC/E,KAAA;;IAGDO,kBAAoB,EAAA;AAAC,QAAA;YAAER,MAAQ,EAAA,gDAAA;YAAkDC,OAAS,EAAA;AAAK;AAAE,KAAA;IACjGQ,oBAAsB,EAAA;AACpB,QAAA;YAAET,MAAQ,EAAA,kDAAA;YAAoDC,OAAS,EAAA;AAAK;AAC7E,KAAA;;IAGDS,aAAe,EAAA;AAAC,QAAA;YAAEV,MAAQ,EAAA,0CAAA;YAA4CC,OAAS,EAAA;AAAK;AAAE,KAAA;IACtFU,eAAiB,EAAA;AAAC,QAAA;YAAEX,MAAQ,EAAA,4CAAA;YAA8CC,OAAS,EAAA;AAAK;AAAE;AAC5F;;AC1BA,MAAMW,QAAWC,GAAAA,MAAAA,CAAKC,OAAO,CAAC,oBAAsB,EAAA,EAAA,CAAA;;ACA9CC,MAAAA,OAAAA,GAAU,CAACC,EAAO,GAAA,CAAC,EAAEJ,QAAS,CAAA,CAAC,EAAEI,EAAAA,CAAG;;ACF1C,MAAMC,wBAAAA,GAA2B,CAACC,IAAMN,EAAAA,QAAAA,GAAAA;AAKtC,IAAA,OAAOO,OAAOC,IAAI,CAACF,MAAMG,MAAM,CAAC,CAACC,GAAKC,EAAAA,OAAAA,GAAAA;AACpCD,QAAAA,GAAG,CAAC,CAAC,EAAEV,QAAAA,CAAS,CAAC,EAAEW,OAAQ,CAAA,CAAC,CAAC,GAAGL,IAAI,CAACK,OAAQ,CAAA;QAE7C,OAAOD,GAAAA;AACT,KAAA,EAAG,EAAC,CAAA;AACN,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA,MAAMT,IAAAA,GAAOW,OAAUX,IAAI;AAE3B,YAAe;AACbY,IAAAA,QAAAA,CAAAA,CAASC,GAAG,EAAA;;AAEVA,QAAAA,GAAAA,CAAIC,oBAAoB,CACtB;YACEX,EAAI,EAAA,mBAAA;YACJY,SAAW,EAAA;AACTZ,gBAAAA,EAAAA,EAAID,OAAQ,CAAA,wBAAA,CAAA;gBACZc,cAAgB,EAAA;AAClB;SAEF,EAAA;AACE,YAAA;gBACED,SAAW,EAAA;oBACTZ,EAAI,EAAA,cAAA;oBACJa,cAAgB,EAAA;AAClB,iBAAA;gBACAb,EAAI,EAAA,OAAA;gBACJc,EAAI,EAAA,CAAC,uBAAuB,CAAC;gBAC7BC,SAAW,EAAA,IAAM,OAAO,sBAAA,CAAA;AACxBC,gBAAAA,WAAAA,EAAalC,YAAYC;AAC3B,aAAA;AACA,YAAA;gBACE6B,SAAW,EAAA;AACTZ,oBAAAA,EAAAA,EAAID,OAAQ,CAAA,0BAAA,CAAA;oBACZc,cAAgB,EAAA;AAClB,iBAAA;gBACAb,EAAI,EAAA,WAAA;gBACJc,EAAI,EAAA,CAAC,2BAA2B,CAAC;gBACjCC,SAAW,EAAA,IAAM,OAAO,sBAAA,CAAA;AACxBC,gBAAAA,WAAAA,EAAalC,YAAYY;AAC3B,aAAA;AACA,YAAA;gBACEkB,SAAW,EAAA;AACTZ,oBAAAA,EAAAA,EAAID,OAAQ,CAAA,+BAAA,CAAA;oBACZc,cAAgB,EAAA;AAClB,iBAAA;gBACAb,EAAI,EAAA,iBAAA;gBACJc,EAAI,EAAA,CAAC,iCAAiC,CAAC;gBACvCC,SAAW,EAAA,IACT,OAAO,sBAAA,CAAA,CAA0BE,IAAI,CAAC,CAACC,OAAS;AAC9CC,4BAAAA,OAAAA,EAASD,IAAIE;yBACf,CAAA,CAAA;AACFJ,gBAAAA,WAAAA,EAAalC,YAAYU;AAC3B,aAAA;AACA,YAAA;gBACEoB,SAAW,EAAA;AACTZ,oBAAAA,EAAAA,EAAID,OAAQ,CAAA,iCAAA,CAAA;oBACZc,cAAgB,EAAA;AAClB,iBAAA;gBACAb,EAAI,EAAA,mBAAA;gBACJc,EAAI,EAAA,CAAC,mCAAmC,CAAC;gBACzCC,SAAW,EAAA,IACT,OAAO,sBAAA,CAAA,CAA4BE,IAAI,CAAC,CAACC,OAAS;AAChDC,4BAAAA,OAAAA,EAASD,IAAIG;yBACf,CAAA,CAAA;AACFL,gBAAAA,WAAAA,EAAalC,YAAYQ;AAC3B;AACD,SAAA,CAAA;AAGHoB,QAAAA,GAAAA,CAAIY,cAAc,CAAC;YACjBtB,EAAI,EAAA,mBAAA;AACJH,YAAAA;AACF,SAAA,CAAA;AACF,KAAA;IACA0B,SAAa,CAAA,GAAA,EAAA;IACb,MAAMC,aAAAA,CAAAA,CAAc,EAAEC,OAAO,EAAE,EAAA;QAC7B,MAAMC,aAAAA,GAAgB,MAAMC,OAAQC,CAAAA,GAAG,CACrCH,OAAQI,CAAAA,GAAG,CAAC,CAACC,MAAAA,GAAAA;AACX,YAAA,OAAO,iCAAM,CAAC,CAAC,eAAe,EAAEA,MAAO,CAAA,KAAK,CAAC,CAAA,CAC1Cb,IAAI,CAAC,CAAC,EAAEE,OAAAA,EAASY,IAAI,EAAE,GAAA;gBACtB,OAAO;AACLA,oBAAAA,IAAAA,EAAM9B,yBAAyB8B,IAAM,EAAA,mBAAA,CAAA;AACrCD,oBAAAA;AACF,iBAAA;AACF,aAAA,CAAA,CACCE,KAAK,CAAC,IAAA;gBACL,OAAO;AACLD,oBAAAA,IAAAA,EAAM,EAAC;AACPD,oBAAAA;AACF,iBAAA;AACF,aAAA,CAAA;AACJ,SAAA,CAAA,CAAA;QAGF,OAAOH,OAAAA,CAAQM,OAAO,CAACP,aAAAA,CAAAA;AACzB;AACF,CAAE;;;;"}